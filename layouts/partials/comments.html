{{- /* Comments area start */ -}}
{{- /* to add comments read => https://gohugo.io/content-management/comments/ */ -}}
{{- /* Comments area end */ -}}
<div class="giscus">
        <script>
                function getGiscusTheme() {
                        const preferredTheme = localStorage.getItem("pref-theme");
                        const giscusTheme = preferredTheme == null || preferredTheme == "light" ? "light" : "dark";
                        return giscusTheme;
                }
                function setGiscusTheme() {
                        function sendMessage(message) {
                                const iframe = document.querySelector('iframe.giscus-frame');
                                if (!iframe) return;
                                iframe.contentWindow.postMessage({ giscus: message }, 'https://giscus.app');
                        }
                        sendMessage({
                                setConfig: {
                                        theme: getGiscusTheme() == "light" ? "dark" : "light",
                                },
                        });
                }
                const attrs = {
                        "src": "https://giscus.app/client.js",
                        "data-repo": "Paxton-PKJ/myBlog",
                        "data-repo-id": "R_kgDOLPQE4g",
                        "data-category": "Announcements",
                        "data-category-id": "DIC_kwDOLPQE4s4CdHOQ",
                        "data-mapping": "pathname",
                        "data-strict": "1",
                        "data-reactions-enabled": "1",
                        "data-emit-metadata": "0",
                        "data-input-position": "top",
                        "data-theme": getGiscusTheme(),
                        "data-lang": "zh-CN",
                        "crossorigin": "anonymous",
                        "async": ""
                };
                const giscusScript = document.createElement("script");
                Object.entries(attrs).forEach(([key, value]) => giscusScript.setAttribute(key, value));
                document.body.appendChild(giscusScript);
                const toggle = document.querySelector('#theme-toggle');
                if (toggle) {
                        toggle.addEventListener('click', setGiscusTheme);
                }
        </script>
        <noscript>Please enable JavaScript to view the comments</noscript>
</div>